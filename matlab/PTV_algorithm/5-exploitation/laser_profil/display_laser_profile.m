% INPUTs
% set: a set of images
% data_profil_proj: the first structure given by the build_profil function
% data_profil: the 2nd structure given by the build_profil function
% data_mask: data to build a rectangular mask
% data: data used for detection (see parameters_tracking)
% time: the time you want to wait between 2 successive plots of profiles
% step: the step between 2 successive plotted profiles
%
% This function plots, for every 'step' images of the set, the profile based 
% on the given data_profil_proj and data_profil. Between each image, the 
% function waits during "time" seconds.

function display_laser_profile(set, data_profil_proj, data_profil, data_mask, data, time,step)

for i=1:step:set.Count
    
    subplot(1,2,1);
    name = ['pict_', num2str(i)];
    plot(data_profil_proj.(name)(:,1), data_profil_proj.(name)(:,2));
    axis([data_mask(1,1) data_mask(1,1)+data_mask(1,3) data_mask(1,2) data_mask(1,2)+data_mask(1,4)]);
    axis ij manual equal;
    
    subplot(1,2,2);
    display_particles(set, i, data, data_profil.(name), 1, 0);
   
    suptitle({'Radial profile of the surface' ['frame ' num2str(i)]});
    pause(time);

end    