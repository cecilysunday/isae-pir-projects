% INPUTs
% set: a set of images
% data_profil_proj: the first structure given by the build_profil function
% data_mask: data to build a rectangular mask
% step: the step between 2 plotted profiles; set this value to set.Count/k
% and you will have k profiles plotted
%
% This function plots on the same graph the profiles of different frames 
% (ie at different timesteps) with the associated legend  

function display_laser_profile_in_time(set, data_profil_proj, data_mask, step)

leg = {};
s_leg = 1;

for i=1:step:set.Count
    name = ['pict_', num2str(i)];
    
    frame_number = num2str(i);
    leg{s_leg} = strcat('Frame',frame_number);
    s_leg = s_leg + 1;
    
    plot(data_profil_proj.(name)(:,1), data_profil_proj.(name)(:,2));
    axis([data_mask(1,1) data_mask(1,1)+data_mask(1,3) data_mask(1,2) data_mask(1,2)+data_mask(1,4)])
    axis ij manual equal;
    hold on
    legend(leg, 'Location', 'bestoutside');
    
    suptitle('Radial profile of the surface: time evolution');
end
end